{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import InnerNav from\"../NavBar/InnerNav\";import{getSessionCookie}from\"../auth/sessions\";import domainName from\"../../domain\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Numbers(){// TODO have to initialize an array or it breaks... fix this\nconst[numbers,setNumbers]=useState([{nickname:\"\",number:\"\"}]);const[nickname,setNickname]=useState(\"\");const[newNumber,setNewNumber]=useState(\"\");const[errormsg,setErrormsg]=useState(\"\");const navigate=useNavigate();const domain=domainName;//  On Load fetch the users numbers loaded in the db\nuseEffect(()=>{fetch(\"\".concat(domain,\"/numbers\"),{method:\"GET\",headers:{\"x-access-token\":getSessionCookie().token,\"ngrok-skip-browser-warning\":\"skip\"}}).then(response=>{if(response.status===200){return response.json();}else throw new Error(\"error\");}).then(data=>{setNumbers(data.numbers);console.log(data);});},[]);const addNewNum=async(nick,num)=>{return fetch(\"\".concat(domain,\"/numbers\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"x-access-token\":getSessionCookie().token,\"ngrok-skip-browser-warning\":\"skip\"},body:JSON.stringify({nickname:nick,number:num})}).then(response=>{return response.json();}).then(data=>{if(data.error){console.log(data.error);throw new Error(\"error - \".concat(data.error));}else{console.log(\"number added\");return Promise.resolve();}}).catch(err=>{console.log(err);return Promise.reject(err);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"grid\",children:[/*#__PURE__*/_jsx(InnerNav,{}),/*#__PURE__*/_jsxs(\"div\",{id:\"Numbers\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"View and Add new Twilio Numbers\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tableDiv\",children:/*#__PURE__*/_jsxs(\"table\",{id:\"demTable\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Number Nickname\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Edit\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:numbers.map(num=>{return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:num.nickname}),/*#__PURE__*/_jsx(\"td\",{children:num.number}),/*#__PURE__*/_jsx(\"td\",{children:\"Edit\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Delete\"})]});})})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add a new Number!\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nickname: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:nickname,onChange:e=>setNickname(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Phone Number: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newNumber,onChange:e=>setNewNumber(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{addNewNum(nickname,newNumber)// TODO re render the component\n.then(()=>navigate(\"/Console\")).catch(err=>setErrormsg(err.message));},children:\"Submit\"})]}),/*#__PURE__*/_jsx(\"p\",{children:errormsg})]})]})]});}export default Numbers;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","InnerNav","getSessionCookie","domainName","jsx","_jsx","jsxs","_jsxs","Numbers","numbers","setNumbers","nickname","number","setNickname","newNumber","setNewNumber","errormsg","setErrormsg","navigate","domain","fetch","concat","method","headers","token","then","response","status","json","Error","data","console","log","addNewNum","nick","num","body","JSON","stringify","error","Promise","resolve","catch","err","reject","className","children","id","map","type","value","onChange","e","target","onClick","message"],"sources":["/Users/davediemert/Repos/phlinger-frontend/src/Components/Numbers/Numbers.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport InnerNav from \"../NavBar/InnerNav\";\nimport { getSessionCookie } from \"../auth/sessions\";\nimport domainName from \"../../domain\";\nfunction Numbers() {\n  // TODO have to initialize an array or it breaks... fix this\n  const [numbers, setNumbers] = useState([{ nickname: \"\", number: \"\" }]);\n  const [nickname, setNickname] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [errormsg, setErrormsg] = useState(\"\");\n  const navigate = useNavigate();\n  const domain = domainName;\n  //  On Load fetch the users numbers loaded in the db\n  useEffect(() => {\n    fetch(`${domain}/numbers`, {\n      method: \"GET\",\n      headers: {\n        \"x-access-token\": getSessionCookie().token,\n        \"ngrok-skip-browser-warning\": \"skip\",\n      },\n    })\n      .then((response) => {\n        if (response.status === 200) {\n          return response.json();\n        } else throw new Error(\"error\");\n      })\n      .then((data) => {\n        setNumbers(data.numbers);\n        console.log(data);\n      });\n  }, []);\n\n  const addNewNum = async (nick, num) => {\n    return fetch(`${domain}/numbers`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-access-token\": getSessionCookie().token,\n        \"ngrok-skip-browser-warning\": \"skip\",\n      },\n      body: JSON.stringify({\n        nickname: nick,\n        number: num,\n      }),\n    })\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        if (data.error) {\n          console.log(data.error);\n          throw new Error(`error - ${data.error}`);\n        } else {\n          console.log(\"number added\");\n          return Promise.resolve();\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        return Promise.reject(err);\n      });\n  };\n\n  return (\n    <div className=\"grid\">\n      <InnerNav />\n      <div id=\"Numbers\">\n        <h1>View and Add new Twilio Numbers</h1>\n        <div className=\"tableDiv\">\n          <table id=\"demTable\">\n            <thead>\n              <tr>\n                <th>Number Nickname</th>\n                <th>Phone Number</th>\n                <th>Edit</th>\n                <th>Delete</th>\n              </tr>\n            </thead>\n            <tbody>\n              {numbers.map((num) => {\n                return (\n                  <tr>\n                    <td>{num.nickname}</td>\n                    <td>{num.number}</td>\n                    <td>Edit</td>\n                    <td>Delete</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n        <div>\n          <h3>Add a new Number!</h3>\n          <form>\n            <div>\n              <label>Nickname: </label>\n              <input\n                type=\"text\"\n                value={nickname}\n                onChange={(e) => setNickname(e.target.value)}\n              />\n            </div>\n            <div>\n              <label>Phone Number: </label>\n              <input\n                type=\"text\"\n                value={newNumber}\n                onChange={(e) => setNewNumber(e.target.value)}\n              />\n            </div>\n            <button\n              type=\"button\"\n              onClick={() => {\n                addNewNum(nickname, newNumber)\n                  // TODO re render the component\n                  .then(() => navigate(\"/Console\"))\n                  .catch((err) => setErrormsg(err.message));\n              }}\n            >\n              Submit\n            </button>\n          </form>\n          <p>{errormsg}</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Numbers;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}